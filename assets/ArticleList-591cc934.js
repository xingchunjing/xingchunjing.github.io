import{u as N,g as S,r as c,h as j,i as E,j as $,a as _,o as m,c as f,b as t,k as D,v as F,F as C,l as I,m as R,d as i,t as y,w as b,f as V}from"./index-f61471ae.js";import{c as M,H as q,_ as J}from"./index-01351d14.js";import{a as O}from"./axios-707ed124.js";const P={class:"article-search"},U={class:"article-list"},G={class:"article-panel"},K=t("div",{class:"article-side"},null,-1),Q={class:"article-desc"},W={class:"article-title"},X={class:"title-name"},Y={class:"title-time"},Z=t("span",{class:"iconfont icon-24gl-calendar",style:{color:"#c7c3c3"}},null,-1),ee={style:{"margin-left":"5px"}},te={class:"title-desc"},se={class:"article-content"},ae=["innerHTML"],ne={class:"article-type"},oe={class:"show-more"},le={class:"artile-page"},_e={__name:"ArticleList",setup(ce){const k=N(),w=S(),n=c([]),r=c([]),v=c([]),z=e=>{O.get(e.path).then(s=>{e.content=s.data})},p=c(1),h=c(2),u=c(0),d=e=>{r.value=[],p.value=e,u.value=n.value.length;let s=(p.value-1)*h.value,a=s+h.value;a>u.value&&(a=u.value);for(var o=s;o<a;o++)(!n.value[o].content||n.value[o].content==null||n.value[o].content=="")&&z(n.value[o]),r.value.push(n.value[o])},g=c(),A=()=>{n.value=v.value.filter(e=>e.title.search(g.value)!=-1),d(1)},x=e=>{if(console.log("boardId",e),!e){n.value=M.map(a=>({...a,content:null}));return}const s=M.filter(a=>a.attach.includes(e));n.value=s.map(a=>({...a,content:null}))};j(()=>{const e=k.params.boardId;x(e),v.value=n.value,d(1)});const L=e=>{w.push("/content/"+e)},T=()=>{document.querySelectorAll("pre code").forEach(s=>{q.highlightElement(s)})};return E(()=>{setTimeout(()=>{T()},500)}),$(()=>k.params,(e,s)=>{x(e.boardId),v.value=n.value,d(1)},{immediate:!0,deep:!0}),(e,s)=>{const a=_("el-divider"),o=_("router-link"),B=_("el-button"),H=_("el-pagination");return m(),f(C,null,[t("div",P,[D(t("input",{class:"search-input",type:"text","onUpdate:modelValue":s[0]||(s[0]=l=>g.value=l)},null,512),[[F,g.value]]),t("span",{class:"iconfont icon-zhiyejinengjianding",style:{color:"pink","margin-left":"10px","font-size":"30px",cursor:"pointer"},onClick:A})]),r.value&&r.value.length>0?(m(!0),f(C,{key:0},I(r.value,l=>(m(),f("div",U,[t("div",G,[K,t("div",Q,[t("div",W,[t("div",X,y(l.title),1),t("div",Y,[Z,t("span",ee,y(l.date),1)])]),t("div",te,y(l.desc),1),i(a),t("div",se,[t("div",{class:"text",innerHTML:l.content},null,8,ae)]),i(o,{to:`/content/${l.id}`,class:"article-more"},{default:b(()=>[V("more>>")]),_:2},1032,["to"]),i(a),t("div",ne,[i(J,{tags:l.type},null,8,["tags"]),t("div",oe,[i(B,{type:"info",size:"small",onClick:ie=>L(l.id)},{default:b(()=>[V("查看全文 >>")]),_:2},1032,["onClick"])])])])])]))),256)):R("",!0),t("div",le,[i(H,{background:"","current-page":p.value,"page-size":h.value,"pager-count":5,onCurrentChange:d,layout:"prev, pager, next",total:u.value},null,8,["current-page","page-size","total"])])],64)}}};export{_e as default};
