import{_ as a,X as s,Y as n,a2 as e}from"./framework-f01f539c.js";const o={},t=e(`<h1 id="google内购-补充" tabindex="-1"><a class="header-anchor" href="#google内购-补充" aria-hidden="true">#</a> google内购(补充)</h1><p>这篇是作为google支付的补充篇，主要是倾向纯curl请求完成订单校验</p><h2 id="_1-获取授权" tabindex="-1"><a class="header-anchor" href="#_1-获取授权" aria-hidden="true">#</a> 1. 获取授权</h2><p>首先，构建url，直接在浏览器访问，然后登陆Google账号并授权允许。 之后就会携带参数跳转到指定的重定向URI</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
* client_id：OAuth2 客户端凭证中client_id
* redirect_uri：OAuth2 客户端凭证配置中的已获授权的重定向uri
* scope：授权范围，我们要获取内购需要的授权，所以请求范围为 https://www.googleapis.com/auth/androidpublisher
* 注意，access_type=offline 是必须的，如果不带这个，将不会生成出 refresh_token
*/</span>
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>accounts<span class="token punctuation">.</span>google<span class="token punctuation">.</span>com<span class="token operator">/</span>o<span class="token operator">/</span>oauth2<span class="token operator">/</span>auth<span class="token operator">?</span>client_id<span class="token operator">=</span><span class="token punctuation">{</span>你的OAuth client id<span class="token punctuation">}</span><span class="token operator">&amp;</span>scope<span class="token operator">=</span><span class="token punctuation">{</span>授权范围<span class="token punctuation">}</span><span class="token operator">&amp;</span>response_type<span class="token operator">=</span>code<span class="token operator">&amp;</span>redirect_uri<span class="token operator">=</span><span class="token punctuation">{</span>重定向<span class="token constant">URI</span><span class="token punctuation">}</span><span class="token operator">&amp;</span>access_type<span class="token operator">=</span>offline
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>二. 获取refresh_token</p><p>授权完成后，谷歌会携带参数跳转到你的重定向URI中。其中包含了最重要 code 字段，拿这个 code 去进行下一步操作，获取</p>`,7),p=[t];function c(r,l){return s(),n("div",null,p)}const d=a(o,[["render",c],["__file","java-google_rep.html.vue"]]);export{d as default};
